# ============================================
# ABShelfLife - Single Container Environment
# Copy this file to .env and adjust values.
# ============================================

# ---------- Container ----------
COMPOSE_PROJECT_NAME=abshelflife
IMAGE_NAME=mildman1848/abshelflife:latest
CONTAINER_NAME=abshelflife
PUID=1000
PGID=1000
TZ=Etc/UTC
RESTART_POLICY=unless-stopped

# ---------- Sync ----------
ABS_SYNC_INTERVAL_SECONDS=300
ABS_SYNC_PUSH_BATCH_SIZE=100
ABS_SYNC_MAX_RETRIES=5
ABS_ENABLE_LOCAL_PRECEDENCE=0
ABS_LOCAL_PUSH_THRESHOLD_MS=30000
ABS_TARGETS_FILE=/config/app/targets.json
ABS_SYNC_TRIGGER_FILE=/config/app/run-now.trigger

# ---------- Matching / Migration ----------
ABS_ENABLE_CROSS_SERVER_MARK_SYNC=1
ABS_MATCH_PRIORITY=asin,isbn,title_author_duration
ABS_ENABLE_LIBRARY_INDEX=1
ABS_LIBRARY_INDEX_INTERVAL_SECONDS=21600
ABS_LIBRARY_INDEX_PAGE_SIZE=200

# ---------- Database ----------
ABS_DB_NAME=abshelflife
ABS_DB_USER=abshelflife
ABS_DB_PORT_PUBLISH=3306

# ---------- Backups ----------
BACKUP_RETENTION_DAYS=14

# ---------- UI ----------
UI_PORT=8080
UI_SECRET_KEY=change-me-please
FILE__UI_SECRET_KEY=/run/secrets/ui_secret_key
UI_SECRET_KEY_SOURCE_FILE=./secrets/ui_secret_key.txt.example
FILE__UI_TOKEN_ENCRYPTION_KEY=/run/secrets/ui_token_encryption_key
AUDIBLE_API_BASE_URL=https://api.audible.com
AUDIBLE_MARKETPLACE=us
AUDIBLE_API_BEARER_TOKEN=
FILE__AUDIBLE_API_BEARER_TOKEN=/run/secrets/audible_api_bearer_token
AUDIBLE_API_BEARER_TOKEN_SOURCE_FILE=./secrets/audible_api_bearer_token.txt.example

# ---------- Paths (host) ----------
ABS_CONFIG_PATH=./runtime/config
ABS_BACKUPS_PATH=./runtime/backups
ABS_SECRETS_PATH=./secrets

# ---------- Secret file mappings ----------
FILE__ABS_DB_PASSWORD=/run/secrets/abs_db_password
FILE__MYSQL_ROOT_PASSWORD=/run/secrets/mysql_root_password
FILE__DB_PASSWORD=/run/secrets/abs_db_password
