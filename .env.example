# ============================================
# ABShelfLife - Docker Environment
# Copy this file to .env and adjust values.
# ============================================

# ---------- Container ----------
COMPOSE_PROJECT_NAME=abshelflife
CONTAINER_NAME=abshelflife
PUID=1000
PGID=1000
TZ=Etc/UTC
RESTART_POLICY=unless-stopped

# ---------- Sync ----------
ABS_SYNC_INTERVAL_SECONDS=300
ABS_SYNC_PUSH_BATCH_SIZE=100
ABS_SYNC_MAX_RETRIES=5
ABS_ENABLE_LOCAL_PRECEDENCE=0
ABS_LOCAL_PUSH_THRESHOLD_MS=30000
ABS_TARGETS_FILE=/config/app/targets.json
ABS_SYNC_TRIGGER_FILE=/config/app/run-now.trigger

# ---------- Matching / Migration ----------
ABS_ENABLE_CROSS_SERVER_MARK_SYNC=1
ABS_MATCH_PRIORITY=asin,isbn,title_author_duration
ABS_ENABLE_LIBRARY_INDEX=1
ABS_LIBRARY_INDEX_INTERVAL_SECONDS=21600
ABS_LIBRARY_INDEX_PAGE_SIZE=200

# ---------- Database ----------
ABS_DB_NAME=abshelflife
ABS_DB_USER=abshelflife
ABS_DB_PORT_PUBLISH=3306

# ---------- Backups ----------
BACKUP_RETENTION_DAYS=14

# ---------- History UI (optional profile: ui) ----------
HISTORY_UI_CONTAINER_NAME=abshelflife-ui
HISTORY_UI_PORT=8080
UI_SECRET_KEY=change-me-please
AUDIBLE_API_BASE_URL=https://api.audible.com
AUDIBLE_MARKETPLACE=us
AUDIBLE_API_BEARER_TOKEN=

# ---------- Paths (host) ----------
ABS_CONFIG_PATH=./runtime/config
ABS_BACKUPS_PATH=./runtime/backups
ABS_SECRETS_PATH=./secrets

# ---------- Secret file mappings ----------
ABS_DB_PASSWORD_FILE=/run/secrets/abs_db_password
MYSQL_ROOT_PASSWORD_FILE=/run/secrets/mysql_root_password
UI_TOKEN_ENCRYPTION_KEY_FILE=/run/secrets/ui_token_encryption_key
